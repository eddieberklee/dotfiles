cd ~/fbsource/fbandroid

# added by setup_fb4a.sh
export FBANDROID_DIR=/Users/edlee/fbsource/fbandroid
alias quicklog_update=/Users/edlee/fbsource/fbandroid/scripts/quicklog/quicklog_update.sh
alias qlu=quicklog_update

export ANDROID_SDK=/opt/android_sdk
export ANDROID_NDK_REPOSITORY=/opt/android_ndk
export ANDROID_HOME=${ANDROID_SDK}
export PATH=${PATH}:${ANDROID_SDK}/tools:${ANDROID_SDK}/platform-tools

HISTSIZE=130000
SAVEHIST=130000
set -g history-limit 30000

# Android
screenshot_time=`date '+%d%m%Y_%H%M%S'`
alias s="/Users/edlee/fbsource/fbandroid/scripts/fb-adb shell screencap -p > ~/Desktop/screenshot${screenshot_time}.png"

# Java 8
# variable should point to the output of `/usr/libexec/java_home -v 1.8`
# IMPORTANT: Copy this over into your zshrc to override
# export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home
# export PATH=${PATH}:${JAVA_HOME}/bin

export JAVA_HOME="$(/usr/libexec/java_home -v 1.8)"
export PATH=${JAVA_HOME}/bin:${PATH}:${ANDROID_SDK}/tools:${ANDROID_SDK}/platform-tools

# MobileConfig
mc() {
  ${FBANDROID_DIR}/scripts/dumpapp mobileconfig qe set $1 $2:$3
  ${FBANDROID_DIR}/scripts/restart_fb4a
  echo "\n"
}
hc() {
  hg commit -m "$1"
}

# Logging
alias logcat_eddie="adb logcat com.facebook.wakizashi | grep eddie"

# Mercurial
alias hs="echo 'Changed Files:'; hg status; echo '\nMercurial Tree:'; hg ssl"
alias hgs="echo 'status:'; hg status; echo '\ntree:'; hg sl"
alias har="hg amend --rebase"
alias fs="hg fsl"
alias sh="hs"
alias hd="hg diff"
alias hr="hg diff -r .^"
alias ha="hg amend --rebase"
alias rebase_stable="hg rebase -d fbandroid/stable"
alias full_pull="arc pull; arc focus --targets fb4a; buck kill; buck build --deep fb4a"

alias rebase_all_master="hg rebase -r 'draft() - master::' -d master"
alias rebase_all_stable="hg rebase -r 'draft() - master::' -d fbandroid/stable"

alias arc_pull="arc feature --cleanup; arc pull; arc focus --targets fb4a //java/com/facebook/feedback/comments/...; rebase_all_stable"

alias focus="arc focus beta --targets fb4a --pinned //java/com/facebook/ipc/feedback/... //java/com/facebook/feedback/..."

alias bsay="say \"build is done\""

# Editus
alias add_deps="${FBANDROID_DIR}/scripts/editus add_suggestions"

alias rageshake="~/fbsource/fbandroid/scripts/dumpapp shake"

# List files by pressing return
# accept-line() {: "${BUFFER:="hs"}"; zle ".$WIDGET"}
# zle -N accept-line



